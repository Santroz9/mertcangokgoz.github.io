<!doctype html>
<html class="no-js" lang="tr-TR">
<head>
  <meta charset="UTF-8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <title>Centos 7 Üzerine OpenVPN Kurulumu | Mertcan GÖKGÖZ</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Jekyll">
  <link href="https://plus.google.com/103305118431759296457" rel="publisher" />
  <!-- Begin Jekyll SEO tag v2.0.0 -->
<meta property="og:title" content="Centos 7 Üzerine OpenVPN Kurulumu" />
<meta name="description" content="İnternetin gidişatı için VPN in mantığını ve önemini bu makalede anlatacak değilim konuya direk girmek lazım VPN şifreli bir network sunar" />
<meta property="og:description" content="İnternetin gidişatı için VPN in mantığını ve önemini bu makalede anlatacak değilim konuya direk girmek lazım VPN şifreli bir network sunar" />
<link rel="canonical" href="https://mertcangokgoz.com/centos-7-uzerine-openvpn-kurulumu/" />
<meta property="og:url" content="https://mertcangokgoz.com/centos-7-uzerine-openvpn-kurulumu/" />
<meta property="og:site_name" content="Mertcan GÖKGÖZ - Özgür Yazılım, Sunucu Yönetimi ve Hizmetleri" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-01-06T15:45:54+02:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@mertcangokgoz" />
<meta name="twitter:creator" content="@http://twitter.com/mertcangokgoz" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Centos 7 Üzerine OpenVPN Kurulumu",
    "datePublished": "2015-01-06T15:45:54+02:00",
    "description": "İnternetin gidişatı için VPN in mantığını ve önemini bu makalede anlatacak değilim konuya direk girmek lazım VPN şifreli bir network sunar",
    "url": "https://mertcangokgoz.com/centos-7-uzerine-openvpn-kurulumu/"
  }
</script>
<!-- End Jekyll SEO tag -->
  
  <meta name="author" content="Mertcan GÖKGÖZ" />
  <meta name="distribution" content="global"/>
  <meta name="robots" content="follow, all"/>
  <meta name="google-site-verification" content="72uYg4UxAer0YwWdtkU93OGqjNq7ZThpqe0M4KxyvIg"/>
  <meta name='yandex-verification' content='410f2e33fe81ce80'/>
  <meta name="msvalidate.01" content="2183CAED5258723C183F825A20DF9C4A"/>
  <link rel="alternate" type="application/rss+xml" title="Mertcan GÖKGÖZ" href="https://mertcangokgoz.com/feed" />
  <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/all.css">
  <link rel="stylesheet" type="text/css" media="print" href="/assets/css/print.css">
  <link rel="stylesheet" type="text/css" href="/assets/css/font-awesome.min.css">
  <script type="text/javascript" src="/assets/js/jquery-1.12.4.min.js"></script>
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  <link rel="shortcut icon" href="/favicon.png">
  <link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/apple-touch-icon-72x72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/apple-touch-icon-114x114-precomposed.png">
</head>
<body>
<div class="container">
    <div class="three columns sidebar">
      <nav class="nav">
  <a href="/">
    <img src="/YeniResimBro.jpg" id="gravatar" alt="Mertcan GÖKGÖZ" width="200" height="200"/>
  </a>
  <h3><a href="/">Mertcan GÖKGÖZ</a></h3>
  <div id="bio">
    <p>
        Kategoriler:<br>

        <a href="/category/linux">Linux</a> &raquo; 216 Yazı<br><a href="/category/programlama">Programlama</a> &raquo; 76 Yazı<br><a href="/category/genel">Genel</a> &raquo; 67 Yazı<br><a href="/category/guvenlik">Guvenlik</a> &raquo; 52 Yazı<br><a href="/category/windows">Windows</a> &raquo; 35 Yazı<br><a href="/category/analiz">Analiz</a> &raquo; 21 Yazı<br><a href="/category/nginx">Nginx</a> &raquo; 13 Yazı<br><a href="/category/jekyll">Jekyll</a> &raquo; 11 Yazı<br><a href="/category/egitimler">Egitimler</a> &raquo; 3 Yazı<br>
        <br>
        Arkadaşlar:<br>
        <a href="https://oztaser.com/" target="_blank">Adil ÖZTAŞER</a><br>
        <a href="https://www.ceyhanmolla.com/" target="_blank">Ceyhan MOLLA</a><br>
        <a href="https://0x6.pw/" target="_blank">Enes ERGÜN</a><br>
        <a href="http://furkankalkan.com/" target="_blank">Furkan KALKAN</a><br>
        <a href="https://onur.im/" target="_blank">Onur ASLAN</a><br>
        <a href="http://www.omeripek.com.tr" target="_blank">Ömer IPEK</a><br>
        <a href="https://yapaygerizeka.github.io/" target="_blank">Yapay Geri Zekâ</a><br>
    </p>
  </div>
  <div id="social">
    Takip Edin:
<div id="stalker">
   

   
   <a title="MertcanGokgoz on Academia" href="https://baskent.academia.edu/MertcanGokgoz" target="_blank">
     <i class="fa fa-book"></i>
   </a>
   

  
  <a title="MertcanGokgoz on Github" href="https://github.com/MertcanGokgoz" target="_blank">
    <i class="fa fa-github-square"></i>
  </a>
  

  
  <a title="MertcanGokgoz on Gitlab" href="https://gitlab.com/u/MertcanGokgoz" target="_blank">
    <i class="fa fa-gitlab"></i>
  </a>
  

  

  
  <a title="mertcangokgoz on Hacker News" href="https://news.ycombinator.com/user?id=mertcangokgoz" target="_blank">
     <i class="fa fa-hacker-news"></i>
  </a>
  

  
  <a title="mertcangokgoz on Reddit" href="https://www.reddit.com/user/mertcangokgoz" target="_blank">
     <i class="fa fa-reddit-square"></i>
  </a>
  

  

  
  <a title="Mertcan GÖKGÖZ on Stack Overflow" href="http://stackoverflow.com/users/4723344" target="_blank">
    <i class="fa fa-stack-overflow"></i>
  </a>
  

  
  <a title="mertcangokgoz on Twitter" href="https://twitter.com/mertcangokgoz" target="_blank">
    <i class="fa fa-twitter-square"></i>
  </a>
  

  

  

  
  <a title="Mertcan GÖKGÖZ on LinkedIn" href="https://www.linkedin.com/in/mertcangokgoz" target="_blank">
    <i class="fa fa-linkedin-square"></i>
  </a>
  

  
  <a title="Mertcan GÖKGÖZ on Google Plus" href="https://plus.google.com/103305118431759296457" target="_blank">
    <i class="fa fa-google-plus-square"></i>
  </a>
  

  

  
  <a title="Mertcan GÖKGÖZ on Youtube" href="https://www.youtube.com/c/MertcanGokgoz" target="_blank">
    <i class="fa fa-youtube"></i>
  </a>
  

  
  <a title="RSS feed" id="atom" href="/feed/">
    <i class="fa fa-rss-square"></i>
  </a>
  
</div>

  </div>
</nav>

    </div>
    <div class="nine columns content">
        <div class="menuM">
    <ul class="topnav">
        <li><a class="active" href="https://mertcangokgoz.com/">Anasayfa</a></li>
        <li><a href="https://mertcangokgoz.com/category/analiz/">Analiz</a></li>
        <li><a href="https://mertcangokgoz.com/category/genel/">Genel</a></li>
        <li><a href="https://mertcangokgoz.com/category/guvenlik/">Güvenlik</a></li>
        <li><a href="https://mertcangokgoz.com/category/linux/">Linux</a></li>
        <li><a href="https://mertcangokgoz.com/category/windows/">Windows</a></li>
        <li><a href="https://mertcangokgoz.com/category/nginx/">Nginx</a></li>
        <li><a href="https://mertcangokgoz.com/category/egitimler/">Egitimler</a></li>
        <li><a href="https://mertcangokgoz.com/category/programlama/">Programlama</a></li>
        <li class="icon">
            <a href="javascript:void(0);" style="font-size:15px;" onclick="myFunction()"><i class="fa fa-bars"></i></a>
        </li>
    </ul>
</div>

<script>
    function myFunction() {
        document.getElementsByClassName("topnav")[0].classList.toggle("responsive");
    }
</script>


<p class="meta">
  January 06, 2015
  <a href="/">
    <i class="home fa fa-home fa-2x"></i>
  </a>
  <a href="/search/">
    <i class="home fa fa-search fa-2x"></i>
  </a>
  <a href="javascript:" onclick="window.print();return false;">
    <i class="home fa fa-print fa-2x"></i>
  </a>
</p>

<h1 class="title">Centos 7 Üzerine OpenVPN Kurulumu</h1>

<div id="post">
  <p>İnternetin gidişatı için <strong>VPN</strong> in mantığını ve önemini bu makalede anlatacak değilim konuya direk girmek lazım <strong>VPN</strong> şifreli bir network sunar böylelikle güvenliğinizi sağlayabilirsiniz.Tabi Türkiye şartlarında yasakları delik deşik etmek için kullanılıyor.Makalemizde Centos 7 üzerine <strong>OpenVPN</strong> kurulumunu komutlar ile göstermeye çalışacağım elimde çalışan hali hazırda bi centos 7 olsaydı resimli olarak göstermeye çalışacaktım ancak mali sıkıntılar olduğunu unutmamak lazım</p>

<p>epeli eklememiz gerekicek yoksa openvpn paketlerini kuramayız epel eklemek için</p>

<div class="highlighter-rouge"><pre class="highlight"><code>yum install epel-release
</code></pre>
</div>

<p>bu işlemimizden sonra <strong>OpenVPN</strong> kurulumu için komutumuzu veriyoruz.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>yum install openvpn -y
</code></pre>
</div>

<p><strong>OpenVPN</strong> in haberleşmesi ve bağlantıyı şifrelemesi içinde <strong>Easy RSA</strong> kurmamız lazım</p>

<div class="highlighter-rouge"><pre class="highlight"><code>yum install easy-rsa -y
</code></pre>
</div>

<p>en önemli noktamıza geldik ayar dosyası oluşturmamız lazım ama önce yedek yapalım ve gereken yerlere dosyamızı taşıyalım</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cp /usr/share/doc/openvpn-*/sample/sample-config-files/server.conf /etc/openvpn
</code></pre>
</div>

<p>hemen sonrasında yapacağımız şey dosyamızı açmak</p>

<div class="highlighter-rouge"><pre class="highlight"><code>nano /etc/openvpn/server.conf
</code></pre>
</div>

<p>açtığımızda karşımıza bi sürü satır gelecek değiştirmemiz gereken yer var dh diye bi satır göreceksiniz bunun ismini <strong>dh2048.pem</strong> yapıyoruz.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>dh dh2048.pem
</code></pre>
</div>

<p>işlem bitiminde networkdeki tüm trafiği <strong>VPN</strong> yönlendirmemiz lazım ki bağlantı şifrelensin bunun için ise</p>

<div class="highlighter-rouge"><pre class="highlight"><code>push "redirect-gateway def1 bypass-dhcp"
</code></pre>
</div>

<p>hemen ardından DNS sunucularını değiştirmek lazım böylelikle işimiz biraz daha kolay olabilir DNS sorgularında sıkıntı çekmemiş oluruz ve birazda sorgularımız hızlanır</p>

<div class="highlighter-rouge"><pre class="highlight"><code>push "dhcp-option DNS 8.8.8.8"
push "dhcp-option DNS 8.8.4.4"
</code></pre>
</div>

<p>kullanıcımızı kimsesiz yapalım hemen</p>

<div class="highlighter-rouge"><pre class="highlight"><code>user nobody
group nobody
</code></pre>
</div>

<p>yukarıdaki yazanları server.conf dosyamıza kayıt ettikten yada gereken satırları yukarıdaki ayarlara göre değiştirip kayıt ettikten sonra bir sonraki aşamamıza geçebiliriz.Geçtiğimiz bu aşamada sisteme sertifika ürettiriyoruz böylelikle bağlantımız güzel bir şekilde güvenli ve şifreli hale gelecek.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mkdir -p /etc/openvpn/easy-rsa/keys
cp -rf /usr/share/easy-rsa/2.0/* /etc/openvpn/easy-rsa
nano /etc/openvpn/easy-rsa/vars
</code></pre>
</div>

<p>komutlarınının bitiminde <strong>vars</strong> nano aracılığı ile açmıştık. <strong>KEY_</strong> ile başlayan bazı satırlar göreceksiniz orda onların hepsini kafanıza göre doldurun.yada doğru bilgilerinizi girin</p>

<div class="highlighter-rouge"><pre class="highlight"><code>. . .
# These are the default values for fields
# which will be placed in the certificate.
# Don't leave any of these fields blank.
export KEY_COUNTRY="TR"
export KEY_PROVINCE="TR"
export KEY_CITY="Ankara"
export KEY_ORG="mertcan"
export KEY_EMAIL="nobody@mertcangokgoz.com"
export KEY_OU="Community"
# X509 Subject Field
export KEY_NAME="server"
. . .
export KEY_CN=openvpn.umertcangokgoz.com
. . .
</code></pre>
</div>

<p>versiyonumuzu kaldıralım belli olmaz uyuşmazlık yapabilir belirli bir isim verelim</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cp /etc/openvpn/easy-rsa/openssl-1.0.0.cnf /etc/openvpn/easy-rsa/openssl.cnf
</code></pre>
</div>

<p>şimdi sertifikamızı tam olarak oluşturmaya geldi sıra</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cd /etc/openvpn/easy-rsa
source ./vars
./clean-all
./build-ca
./build-key-server server
./build-dh
</code></pre>
</div>

<p>yukarıdaki işlemlerin tamamlanması yaklaşık bi 3 dknızı alacaktır bu işlemlerin bitiminde oluşan dosyaları openvpn klasörü içerisine kopyalıyoruz.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cd /etc/openvpn/easy-rsa/keys
cp dh2048.pem ca.crt server.crt server.key /etc/openvpn
</code></pre>
</div>

<p>son olarak client tarafında ufak bi ayara</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cd /etc/openvpn/easy-rsa
./build-key client
</code></pre>
</div>

<p>işlemimiz böylelikle kurulum aşamasında sonlanmış oluyor bundan sonra geriye yönlendirme ve yetkilendirme kaldı</p>

<div class="highlighter-rouge"><pre class="highlight"><code>yum install iptables-services -y
systemctl mask firewalld
systemctl enable iptables
systemctl stop firewalld
systemctl start iptables
iptables --flush
</code></pre>
</div>

<p>tertemiz bir firewall ayarlarına merhaba diyoruz ve yapmamız gerekenleri sırasıyla yapıyoruz ilk olarak ip aralıklarını firewall onaylatmak</p>

<div class="highlighter-rouge"><pre class="highlight"><code>iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE
</code></pre>
</div>

<p>yaptığımız bu onaylatma işlemini kayıt edelimki sonra sıkıntı çıkartmasın başımıza</p>

<div class="highlighter-rouge"><pre class="highlight"><code>iptables-save &gt; /etc/sysconfig/iptables
</code></pre>
</div>

<p>ip yönlendirmeyi açmamız lazım ipv4 için bunuda aşağıdakileri yaparak halledebilirsiniz.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>nano /etc/sysctl.conf
</code></pre>
</div>

<p>aşağıdaki gibi yapıyoruz içerisindekini</p>

<div class="highlighter-rouge"><pre class="highlight"><code>net.ipv4.ip_forward = 1
</code></pre>
</div>

<p>ve bi restart atıyoruz network servisine</p>

<div class="highlighter-rouge"><pre class="highlight"><code>systemctl restart network.service
</code></pre>
</div>

<p>OpenVPN başlatmaya geldi sıra sabırla bu işlemleri yaptıysanız sona yaklaşmanıza az bir işlem kalmış demektir sabredin</p>

<div class="highlighter-rouge"><pre class="highlight"><code>systemctl -f enable openvpn@server.service
systemctl start openvpn@server.service
</code></pre>
</div>

<p>yukarıda clienti ayarlamaktan bahsetmiştim az bir kısmını yapmıştık şimdi onuda sonlandırmamız gerekiyor böylelikle bilgisayarımızdan bağlanabilelim VPN imize</p>

<p>Aşağıdakileri bir şekilde bilgisayarınıza kopyalayın bunu kullanırken <strong>SFTP</strong> ile yapabilirsiniz <strong>WinSCP</strong> önerilir.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>/etc/openvpn/easy-rsa/keys/ca.crt
/etc/openvpn/easy-rsa/keys/client.crt
/etc/openvpn/easy-rsa/keys/client.key
</code></pre>
</div>

<p>yukarıdakileri sisteminize kopyaladıktan sonra .ovpn dosyası oluşturmanız gerekiyor aşağıdaki yönergeyi takip ederek yapabilirsiniz.tek yapılacak olan dosya yollarını ve ip adresini belirleyip kaydetmek</p>

<div class="highlighter-rouge"><pre class="highlight"><code>client
dev tun
proto udp
remote sunucunuzun ip adresi 1194
resolv-retry infinite
nobind
persist-key
persist-tun
comp-lzo
verb 3
ca dosya yolu/ca.crt
cert dosya yolu/client.crt
key dosya yolu/client.key
</code></pre>
</div>

<p>hata almadan son aşamaya kadar gelebildiyseniz.Windows için OpenVPN kurmak ve yukarıda oluşturmuş olduğunuz .ovpn dosyasını <strong>C:\Program Files\OpenVPN\config</strong> yoluna atmak sonrasında programdan kolaylıkla bağlanabilirsiniz.</p>

</div>

<div id="paylasim">
<h3>Bu yazıyı paylaş:</h3>
<a href="https://www.facebook.com/sharer/sharer.php?u=https://mertcangokgoz.com/centos-7-uzerine-openvpn-kurulumu/" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" >
    <i class="fa fa-facebook-square fa share-button"> Facebook</i>
</a>
<a href="https://twitter.com/intent/tweet?text=Centos 7 Üzerine OpenVPN Kurulumu&url=https://mertcangokgoz.com/centos-7-uzerine-openvpn-kurulumu/&via=mertcangokgoz&related=mertcangokgoz" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;">
    <i class="fa fa-twitter-square fa share-button"> Twitter</i>
</a>
<a href="https://plus.google.com/share?url=https://mertcangokgoz.com/centos-7-uzerine-openvpn-kurulumu/" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" >
    <i class="fa fa-google-plus-square fa share-button"> Google</i>
</a>
<a href="http://www.reddit.com/submit?url=https://mertcangokgoz.com/centos-7-uzerine-openvpn-kurulumu/&title=Centos 7 Üzerine OpenVPN Kurulumu" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" >
    <i class="fa fa-reddit-square fa share-button"> Reddit</i>
</a>
<a href="https://www.linkedin.com/shareArticle?mini=true&url=https://mertcangokgoz.com/centos-7-uzerine-openvpn-kurulumu/&title=Centos 7 Üzerine OpenVPN Kurulumu&summary=&source=webjeda" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" >
    <i class="fa fa-linkedin-square fa share-button"> Linkedin</i>
</a>
<a href="mailto:?subject=Centos 7 Üzerine OpenVPN Kurulumu&amp;body=Check out this site https://mertcangokgoz.com/centos-7-uzerine-openvpn-kurulumu/">
    <i class="fa fa-envelope-square fa share-button"> Email</i>
</a>
</div>


<div class="ajaxloadcomment"><button class="show-comments">Yorumları yükle</button></div>
<div itemprop="comment" id="disqus_thread"></div>
<script>
$(document).ready(function() {
    $('.show-comments').on('click', function(){
          var disqus_shortname = 'mertcanofficial';

          $.ajax({
                  type: "GET",
                  url: "//" + disqus_shortname + ".disqus.com/embed.js",
                  dataType: "script",
                  cache: true
          });
          $(this).fadeOut();
    });
});
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



      <div class="footer">
        <div class="disclaimer">
  
  <p>
    Bu sitedeki gönderiler bana aittir ve iş verenime ait pozisyonlar,
    stratejiler veya görüşler temsil edilmemektedir.<br>
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Atıf-Paylaşım Lisansı</a> altındadır.<br>
        <a href="/ders-notlari/">Ders Notları</a>
        <span> | </span><a href="/gizlilik-politikasi/">Gizlilik Politikası</a>
        <span> | </span><a href="/kullanim-kosullari/">Kullanım Koşulları</a>
        <span> | </span><a href="/hakkimda/">Hakkımda</a>
        <span> | </span><a href="/iletisim/">İletişim</a><br>
        <b>BTC:</b> 36DFx4anTdsx3AnBiA1oqR3oHkMV3RJME1<br>
        <a href="/hosted/">Hosted By </a> © Mertcan GÖKGÖZ, 2016 - Linux Hacısı
  </p>
  
</div>

      </div>
    </div>
  </div>
  <div id="up">
    <a href="javascript:"><i class="fa fa-arrow-up fa-2x"></i></a>
  </div>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-41967916-5', 'auto');
    ga('send', 'pageview');
  </script>







</body>
</html>
