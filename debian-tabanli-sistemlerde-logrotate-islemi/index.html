<!doctype html>
<html class="no-js" lang="tr-TR">
<head>
  <meta charset="UTF-8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <title>Debian Tabanlı Sistemlerde Logrotate İşlemi | Mertcan GÖKGÖZ</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Jekyll">
  <link href="https://plus.google.com/103305118431759296457" rel="publisher" />
  <!-- Begin Jekyll SEO tag v2.1.0 -->
<meta property="og:title" content="Debian Tabanlı Sistemlerde Logrotate İşlemi" />
<meta name="description" content="Logların aşırı bir şekilde yer kaplamasından dolayı diskimizde yer kalmadı benden logrotate işlemi istenmediği için haliyle yapmadım ve sunucu" />
<meta property="og:description" content="Logların aşırı bir şekilde yer kaplamasından dolayı diskimizde yer kalmadı benden logrotate işlemi istenmediği için haliyle yapmadım ve sunucu" />
<link rel="canonical" href="https://mertcangokgoz.com/debian-tabanli-sistemlerde-logrotate-islemi/" />
<meta property="og:url" content="https://mertcangokgoz.com/debian-tabanli-sistemlerde-logrotate-islemi/" />
<meta property="og:site_name" content="Mertcan GÖKGÖZ - Özgür Yazılım, Sunucu Yönetimi ve Hizmetleri" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-10-04T13:02:04+03:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@mertcangokgoz" />
<meta name="twitter:creator" content="@http://twitter.com/mertcangokgoz" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Debian Tabanlı Sistemlerde Logrotate İşlemi",
"datePublished": "2015-10-04T13:02:04+03:00",
"description": "Logların aşırı bir şekilde yer kaplamasından dolayı diskimizde yer kalmadı benden logrotate işlemi istenmediği için haliyle yapmadım ve sunucu",
"url": "https://mertcangokgoz.com/debian-tabanli-sistemlerde-logrotate-islemi/"}</script>
<!-- End Jekyll SEO tag -->

  
  <meta name="author" content="Mertcan GÖKGÖZ" />
  <meta name="distribution" content="global"/>
  <meta name="robots" content="follow, all"/>
  <meta name="google-site-verification" content="72uYg4UxAer0YwWdtkU93OGqjNq7ZThpqe0M4KxyvIg"/>
  <meta name='yandex-verification' content='410f2e33fe81ce80'/>
  <meta name="msvalidate.01" content="2183CAED5258723C183F825A20DF9C4A"/>
  <link rel="alternate" type="application/rss+xml" title="Mertcan GÖKGÖZ" href="https://mertcangokgoz.com/feed" />
  <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/all.css">
  <link rel="stylesheet" type="text/css" media="print" href="/assets/css/print.css">
  <link rel="stylesheet" type="text/css" href="/assets/css/font-awesome.min.css">
  <script type="text/javascript" src="/assets/js/jquery-1.12.4.min.js"></script>
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  <link rel="shortcut icon" href="/favicon.png">
  <link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/apple-touch-icon-72x72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/apple-touch-icon-114x114-precomposed.png">
</head>
<body>
<div class="container">
    <div class="three columns sidebar">
      <nav class="nav">
  <a href="/">
    <img src="/YeniResimBro.jpg" id="gravatar" alt="Mertcan GÖKGÖZ" width="200" height="200"/>
  </a>
  <h3><a href="/">Mertcan GÖKGÖZ</a></h3>
  <div id="bio">
    <p>
        Kategoriler:<br>

        <a href="/category/linux">Linux</a> &raquo; 231 Yazı<br><a href="/category/programlama">Programlama</a> &raquo; 79 Yazı<br><a href="/category/genel">Genel</a> &raquo; 69 Yazı<br><a href="/category/guvenlik">Guvenlik</a> &raquo; 52 Yazı<br><a href="/category/windows">Windows</a> &raquo; 36 Yazı<br><a href="/category/analiz">Analiz</a> &raquo; 21 Yazı<br><a href="/category/jekyll">Jekyll</a> &raquo; 16 Yazı<br><a href="/category/nginx">Nginx</a> &raquo; 15 Yazı<br><a href="/category/egitimler">Egitimler</a> &raquo; 6 Yazı<br>
        <br>
        Arkadaşlar:<br>
        <a href="https://oztaser.com/" target="_blank" rel="nofollow">Adil ÖZTAŞER</a><br>
        <a href="https://aligoren.com/" target="_blank" rel="nofollow">Ali GÖREN</a><br>
        <a href="https://www.ceyhanmolla.com/" target="_blank" rel="nofollow">Ceyhan MOLLA</a><br>
        <a href="https://0x6.pw/" target="_blank" rel="nofollow">Enes ERGÜN</a><br>
        <a href="http://furkankalkan.com/" target="_blank" rel="nofollow">Furkan KALKAN</a><br>
        <a href="http://www.hamdicatal.com/" target="_blank" rel="nofollow">Hamdi ÇATAL</a><br>
        <a href="https://onur.im/" target="_blank" rel="nofollow">Onur ASLAN</a><br>
        <a href="http://www.omeripek.com.tr" target="_blank" rel="nofollow">Ömer IPEK</a><br>
        <a href="https://yapaygerizeka.github.io/" target="_blank" rel="nofollow">Yapay Geri Zekâ</a><br>
    </p>
  </div>
  <div id="social">
    Takip Edin:
<div id="stalker">
   

   
   <a title="MertcanGokgoz on Academia" href="https://baskent.academia.edu/MertcanGokgoz" target="_blank" rel="nofollow">
     <i class="fa fa-book"></i>
   </a>
   

  
  <a title="MertcanGokgoz on Github" href="https://github.com/MertcanGokgoz" target="_blank" rel="nofollow">
    <i class="fa fa-github-square"></i>
  </a>
  

  
  <a title="MertcanGokgoz on Gitlab" href="https://gitlab.com/u/MertcanGokgoz" target="_blank" rel="nofollow">
    <i class="fa fa-gitlab"></i>
  </a>
  

  

  

  

  

  

  
  <a title="mertcangokgoz on Twitter" href="https://twitter.com/mertcangokgoz" target="_blank" rel="nofollow">
    <i class="fa fa-twitter-square"></i>
  </a>
  

  

  

  
  <a title="Mertcan GÖKGÖZ on LinkedIn" href="https://www.linkedin.com/in/mertcangokgoz" target="_blank" rel="nofollow">
    <i class="fa fa-linkedin-square"></i>
  </a>
  

  
  <a title="Mertcan GÖKGÖZ on Google Plus" href="https://plus.google.com/103305118431759296457" target="_blank" rel="nofollow">
    <i class="fa fa-google-plus-square"></i>
  </a>
  

  

  
  <a title="Mertcan GÖKGÖZ on Youtube" href="https://www.youtube.com/c/MertcanGokgoz" target="_blank" rel="nofollow">
    <i class="fa fa-youtube"></i>
  </a>
  

  
  <a title="RSS feed" id="atom" href="/feed/">
    <i class="fa fa-rss-square"></i>
  </a>
  
</div>

  </div>
</nav>

    </div>
    <div class="nine columns content">
        <div class="menuM">
    <ul class="topnav">
        <li><a class="active" href="https://mertcangokgoz.com/">Anasayfa</a></li>
        <li><a href="https://mertcangokgoz.com/category/analiz/">Analiz</a></li>
        <li><a href="https://mertcangokgoz.com/category/genel/">Genel</a></li>
        <li><a href="https://mertcangokgoz.com/category/guvenlik/">Güvenlik</a></li>
        <li><a href="https://mertcangokgoz.com/category/linux/">Linux</a></li>
        <li><a href="https://mertcangokgoz.com/category/windows/">Windows</a></li>
        <li><a href="https://mertcangokgoz.com/category/jekyll/">Jekyll</a></li>
        <li><a href="https://mertcangokgoz.com/category/nginx/">Nginx</a></li>
        <li><a href="https://mertcangokgoz.com/category/egitimler/">Egitimler</a></li>
        <li><a href="https://mertcangokgoz.com/category/programlama/">Programlama</a></li>
        <li class="icon">
            <a href="javascript:void(0);" style="font-size:15px;" onclick="myFunction()"><i class="fa fa-bars"></i></a>
        </li>
    </ul>
</div>

<script>
    function myFunction() {
        document.getElementsByClassName("topnav")[0].classList.toggle("responsive");
    }
</script>


<p class="meta">
  October 04, 2015
  <a href="/">
    <i class="home fa fa-home fa-2x"></i>
  </a>
  <a href="/search/">
    <i class="home fa fa-search fa-2x"></i>
  </a>
  <a href="javascript:" onclick="window.print();return false;">
    <i class="home fa fa-print fa-2x"></i>
  </a>
</p>

<h1 class="title">Debian Tabanlı Sistemlerde Logrotate İşlemi</h1>

<div id="post">
  <p><strong>Logların</strong> aşırı bir şekilde yer kaplamasından dolayı diskimizde yer kalmadı benden <strong>logrotate</strong> işlemi istenmediği için haliyle yapmadım ve sunucu şişip bugün sorun çıkartmış. Normalde yapılması gereken ya <strong>log</strong> tutmayı kapatmak yada belirli bir boyuta ulaştığında temizlemek yada <strong>aylık</strong> , <strong>haftalık</strong> olarak silmek biz bunları yapmadık, evde kullandığım bilgisayarda zaten ubuntu olunca kendi sistemimdede aynı sorunu yaşadığım için düzeltelim dedik</p>

<p>ilk önce sistemin log tutmasını düzenlemek için ufak bir uygulamamızı kuralım server sisteminde ön tanımlı olarak gelen <strong>isolar</strong> mevcut ancak yok ise aşağıdaki komut ile kurabilirsiniz.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo apt-get install logrotate
</code></pre>
</div>

<p>kurulumu yaptığınız teyit etmemiz gerekiyor kurmadan öncede teyit edebilirsiniz.Dediğim gibi kurulu olarak gelebiliyor.Eski sürümlerde gelmeyecektir.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>logrotate
</code></pre>
</div>

<p>komutu verdiğimizde ekrana sürüm ve kullanabileceğiniz kodlar hakkında bilgilendirme kısmı gelecek</p>

<p><img src="/assets/logrotateconfirmationgorsel.jpg" alt="logrotateconfirmationgorsel" /></p>

<p>demekki sistemimizde var zaten gereken işlemlere geçelim aktif edelim düzenleyelim bir güzellik yapalım.Aşağıdaki dosya yoluna ilerliyoruz.</p>

<p><strong>Dosya:</strong> /etc/logrotate.conf</p>

<div class="highlighter-rouge"><pre class="highlight"><code>nano /etc/logrotate.conf
</code></pre>
</div>

<p><img src="/assets/logrotateconfgorsel.jpg" alt="logrotateconfgorsel" /></p>

<p>Şimdi dosya içeriğimizde işlem yapılacak loglara dair satırlar göreceksiniz.Bizde şişme işlemi yapan loglar şu şekildeydi</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Delete 5,49GB /var/log/syslog.1
Delete 14,62GB /var/log/ufw.log.1
Delete 14,62GB /var/log/kern.log.1
</code></pre>
</div>

<p>gördüğünüz gibi boyutları oldukça yüksek ufw ve kern loglarının içeriği aslına bakarsanız birebir çıkabilir çünkü güvenlik duvarının yaptığı loglama işlemini birde kernel in logları yapmakta ne ilginçtirki syslogdada görebilirsiniz örnek olarak içeriğinden bir kaç satır.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Oct 4 12:13:52 0x2e88ce4 kernel: [4617.129012] [UFW AUDIT] IN=lo OUT= MAC=00:00:00:00:00:00:00:00:00:00:00:00:08:00 SRC=127.0.0.1 DST=127.0.0.1 LEN=72 TOS=0x00 PREC=0x00 TTL=64 ID=47419 DF PROTO=UDP SPT=59513 DPT=53 LEN=52
Oct 4 12:13:52 0x2e88ce4 kernel: [4617.129067] [UFW AUDIT] IN= OUT=lo SRC=127.0.0.1 DST=127.0.0.1 LEN=108 TOS=0x00 PREC=0x00 TTL=64 ID=47420 DF PROTO=UDP SPT=53 DPT=59513 LEN=88
Oct 4 12:13:52 0x2e88ce4 kernel: [4617.129073] [UFW AUDIT] IN=lo OUT= MAC=00:00:00:00:00:00:00:00:00:00:00:00:08:00 SRC=127.0.0.1 DST=127.0.0.1 LEN=108 TOS=0x00 PREC=0x00 TTL=64 ID=47420 DF PROTO=UDP SPT=53 DPT=59513 LEN=88
Oct 4 12:13:52 0x2e88ce4 kernel: [4617.131536] [UFW AUDIT] IN= OUT=lo SRC=127.0.0.1 DST=127.0.0.1 LEN=70 TOS=0x00 PREC=0x00 TTL=64 ID=47421 DF PROTO=UDP SPT=56888 DPT=53 LEN=50
Oct 4 12:13:52 0x2e88ce4 kernel: [4617.131544] [UFW AUDIT] IN=lo OUT= MAC=00:00:00:00:00:00:00:00:00:00:00:00:08:00 SRC=127.0.0.1 DST=127.0.0.1 LEN=70 TOS=0x00 PREC=0x00 TTL=64 ID=47421 DF PROTO=UDP SPT=56888 DPT=53 LEN=50
Oct 4 12:13:52 0x2e88ce4 kernel: [4617.131626] [UFW AUDIT] IN= OUT=lo SRC=127.0.0.1 DST=127.0.0.1 LEN=70 TOS=0x00 PREC=0x00 TTL=64 ID=47422 DF PROTO=UDP SPT=37883 DPT=1064 LEN=50
Oct 4 12:13:52 0x2e88ce4 kernel: [4617.131634] [UFW AUDIT] IN=lo OUT= MAC=00:00:00:00:00:00:00:00:00:00:00:00:08:00 SRC=127.0.0.1 DST=127.0.0.1 LEN=70 TOS=0x00 PREC=0x00 TTL=64 ID=47422 DF PROTO=UDP SPT=37883 DPT=1064 LEN=50
Oct 4 12:13:52 0x2e88ce4 kernel: [4617.131688] [UFW AUDIT] IN= OUT=eth0 SRC=192.168.0.14 DST=213.202.215.23 LEN=540 TOS=0x00 PREC=0x00 TTL=64 ID=27465 PROTO=UDP SPT=47808 DPT=5353 LEN=520
Oct 4 12:14:42 0x2e88ce4 kernel: [4667.270430] show_signal_msg: 24 callbacks suppressed
</code></pre>
</div>

<p>evet içerik olarak baktığımızda dns sorguları ve ufw ye takılan kurallar göze çarpıyor.gereken rotate işlemini gerçekleştirelim örnek olarak</p>

<div class="highlighter-rouge"><pre class="highlight"><code>/var/log/kern.log {
	monthly
	rotate 6
	compress
	delaycompress
	missingok
	notifempty
	create 644 root root
}
</code></pre>
</div>

<p>yukarıdaki örnekde ne yaptık ilk olarak logları aylık bir şekilde tutulacağını belirttik <strong>rotate 6</strong> ilede 6 günlük periyotlar halinde işlem yapılmasını tercih ettik kısacası elinizde 6 kopya olacak geri kalanların hepsi temizlenecek.Tabiki compress komutu ilede logumuzu sıkıştırmayı unutmadık gzip formatına sıkıştıracak loglarımızı uygulayacağınız loglara bunları tek tek belirterek işlemleri gerçekleştirebilirsiniz.Sunucunuz günlük çok fazla log tutuyor ise rotate komutunu 2 verebilirsiniz. yada boyut olarak söyleyebilirsiniz <strong>“Size 100M” işlemleri buna göre yapacak ve aylık periyotlara takılmayacaktır.</strong></p>

<p>logrotate kontrolü yapalım bakalım işlemimiz kayda alınmış mı komutumuz şu şekilde</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cat /var/lib/logrotate/status
</code></pre>
</div>

<p><img src="/assets/logrotatestatusgorsel.jpg" alt="logrotatestatusgorsel" /></p>

<h2 id="loglar-tamamen-kapatmak-isterseniz">Logları tamamen kapatmak isterseniz</h2>

<p>Siteniz oldukça büyük ve deli gibi log tutuyor ise yada spam saldırısı alıyorsanız access.log dosyanız şişiyor ise ilk başta yukarıdaki yöntemi uygulayabilirsiniz.Yada birader ben kafamı fazla yormak istemiyorum dersenizde direk sistemin log tutmasına engel olalım tabiki <strong>bu access.logların tutulmasına engel değil bunu web sunucunuzdan kapatmanız gerekiyor.</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>service rsyslog stop
</code></pre>
</div>

<p>Bu işlemleri tamamladıktan sonra <strong>/var/log</strong> dosyasında temizlik işlemi yapmanızı öneririm.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>rm -rf *.log
rm -rf *.1
</code></pre>
</div>

<p>2 şekildede tutulan eski <strong>logları</strong> temizleyebilirsiniz.</p>

</div>

<div id="paylasim">
<h3>Bu yazıyı paylaş:</h3>
<a href="https://www.facebook.com/sharer/sharer.php?u=https://mertcangokgoz.com/debian-tabanli-sistemlerde-logrotate-islemi/" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" >
    <i class="fa fa-facebook-square fa share-button"> Facebook</i>
</a>
<a href="https://twitter.com/intent/tweet?text=Debian Tabanlı Sistemlerde Logrotate İşlemi&url=https://mertcangokgoz.com/debian-tabanli-sistemlerde-logrotate-islemi/&via=mertcangokgoz&related=mertcangokgoz" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;">
    <i class="fa fa-twitter-square fa share-button"> Twitter</i>
</a>
<a href="https://plus.google.com/share?url=https://mertcangokgoz.com/debian-tabanli-sistemlerde-logrotate-islemi/" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" >
    <i class="fa fa-google-plus-square fa share-button"> Google</i>
</a>
<a href="http://www.reddit.com/submit?url=https://mertcangokgoz.com/debian-tabanli-sistemlerde-logrotate-islemi/&title=Debian Tabanlı Sistemlerde Logrotate İşlemi" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" >
    <i class="fa fa-reddit-square fa share-button"> Reddit</i>
</a>
<a href="https://www.linkedin.com/shareArticle?mini=true&url=https://mertcangokgoz.com/debian-tabanli-sistemlerde-logrotate-islemi/&title=Debian Tabanlı Sistemlerde Logrotate İşlemi&summary=&source=webjeda" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" >
    <i class="fa fa-linkedin-square fa share-button"> Linkedin</i>
</a>
<a href="mailto:?subject=Debian Tabanlı Sistemlerde Logrotate İşlemi&amp;body=Check out this site https://mertcangokgoz.com/debian-tabanli-sistemlerde-logrotate-islemi/">
    <i class="fa fa-envelope-square fa share-button"> Email</i>
</a>
</div>


<div class="ajaxloadcomment"><button class="show-comments">Yorumları yükle</button></div>
<div itemprop="comment" id="disqus_thread"></div>
<script>
$(document).ready(function() {
    $('.show-comments').on('click', function(){
          var disqus_shortname = 'mertcanofficial';

          $.ajax({
                  type: "GET",
                  url: "//" + disqus_shortname + ".disqus.com/embed.js",
                  dataType: "script",
                  cache: true
          });
          $(this).fadeOut();
    });
});
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



      <div class="footer">
        <div class="disclaimer">
  
  <p>
    Bu sitedeki gönderiler bana aittir ve iş verenime ait pozisyonlar,
    stratejiler veya görüşler temsil edilmemektedir.<br>
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Atıf-Paylaşım Lisansı</a> altındadır.<br>
        <a href="/ders-notlari/">Ders Notları</a>
        <span> | </span><a href="/gizlilik-politikasi/">Gizlilik Politikası</a>
        <span> | </span><a href="/kullanim-kosullari/">Kullanım Koşulları</a>
        <span> | </span><a href="/hakkimda/">Hakkımda</a>
        <span> | </span><a href="/iletisim/">İletişim</a><br>
        <b>BTC:</b> 36DFx4anTdsx3AnBiA1oqR3oHkMV3RJME1<br>
        <a href="/hosted/">Hosted By </a> © Mertcan GÖKGÖZ, 2016 - Linux Hacısı
  </p>
  
</div>

      </div>
    </div>
  </div>
  <div id="up">
    <a href="javascript:"><i class="fa fa-arrow-up fa-2x"></i></a>
  </div>







</body>
</html>
